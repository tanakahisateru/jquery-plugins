<!DOCTYPE html>
<html>
<head>
<title>NETEYE Touch Gallery Demo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>

<!-- [Dependencies[ -->
<!-- This block is processed by the build script and replaced with a single line: -->
<script type="text/javascript" src="../activity-indicator/activity-indicator.js"></script>
<script type="text/javascript" src="../transform/transform.js"></script>
<script type="text/javascript" src="touch-gallery.js"></script>
<!-- ]] -->

<style type="text/css">
body {
	color: #fff;
	background: #00406c;
	padding: 60px 10px 20px 20px;
}
#content {
	padding: 50px 0 0 0;
	width: 600px;
}
#gallery {
	width: 300px;
	overflow: hidden;
}
#gallery div,
#gallery a {
	display: block;
	float: left;
	color: #fff;
	width: 75px;
	height: 75px;
	margin: 0 8px 8px 0;
}

#galleryStripe .galleryPage .description {
    position: absolute;
    z-index: 1000;
    bottom: 0;
    left: 0;
    padding: 0.5em 1.5em;
    background: #000;
}
</style>
</head>
<body>

<div id="content">
	<div id="gallery">
	</div>
</div>

<script>
	$(function() {
		$.getJSON("http://api.flickr.com/services/rest?method=flickr.photosets.getPhotos&api_key=ed144a125aca366df3438c58c0c0ec9d&photoset_id=72157624601158052&extras=url_sq,url_m,url_o,&format=json&jsoncallback=?", function(data) {
			$.each(data.photoset.photo, function(i) {
				$('<div>').append($('<img>').attr('src', this.url_sq)).data('flickr', this).appendTo('#gallery');
			});
			$('#gallery div').touchGallery({
				getSource: function() {
					var f = $(this).data('flickr');
					return f.url_o ||Â f.url_sq.replace('_s.', '_b.');
				},
                afterShown: function(page) {
                    console.log('shown', page, this);
					var f = $(this).data('flickr');
                    $('<div>').addClass('description').text(f.title).appendTo(page);
                },
                afterHidden: function(page) {
                    console.log('hidden', page, this);
                    page.find('.description').remove();
                }
			});
		});
		
	});
</script>

</body>
</html>